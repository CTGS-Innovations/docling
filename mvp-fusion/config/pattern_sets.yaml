# Pattern Sets Configuration
# =========================
# Optimized pattern definitions for MVP-Fusion
# Separated by engine type for maximum performance

# Aho-Corasick Keywords (Simple String Matching)
# ===============================================
# These are processed at 50M+ chars/sec with AC automaton

aho_corasick_patterns:
  # Safety and Compliance Keywords
  safety_keywords:
    - "safety"
    - "hazard"
    - "risk"
    - "danger"
    - "warning"
    - "caution"
    - "emergency"
    - "accident"
    - "incident"
    - "injury"
    - "fatality"
    - "compliance"
    - "regulation"
    - "standard"
    - "requirement"
    - "mandatory"
    - "prohibited"
    - "restricted"
    - "approved"
    - "certified"
    
  # Regulatory Organizations
  organizations:
    - "OSHA"
    - "EPA"
    - "NIOSH"
    - "FDA"
    - "NFPA"
    - "ANSI"
    - "ISO"
    - "DOT"
    - "FAA"
    - "CDC"
    - "MSHA"
    - "CPSC"
    
  # Domain-Specific Terms
  workplace_safety:
    - "PPE"
    - "personal protective equipment"
    - "hard hat"
    - "safety glasses"
    - "respirator"
    - "harness"
    - "lockout"
    - "tagout"
    - "LOTO"
    - "confined space"
    - "fall protection"
    - "scaffolding"
    - "ladder safety"
    - "excavation"
    - "trenching"
    
  environmental:
    - "pollution"
    - "contamination"
    - "emission"
    - "discharge"
    - "waste"
    - "recycling"
    - "environmental impact"
    - "air quality"
    - "water quality"
    - "soil contamination"
    - "groundwater"
    - "hazardous material"
    - "toxic"
    - "carcinogen"
    
  medical:
    - "exposure"
    - "dose"
    - "threshold"
    - "limit"
    - "permissible"
    - "occupational health"
    - "industrial hygiene"
    - "ergonomics"
    - "repetitive strain"
    - "noise exposure"
    - "hearing protection"
    - "respiratory protection"

# FLPC Rust Regex Patterns (Complex Pattern Matching)  
# ===================================================
# These are processed at 69M chars/sec with FLPC

flpc_regex_patterns:
  # Universal Entities (Complex Patterns)
  universal_entities:
    money:
      pattern: '(?i)[\$€£¥₹]\s*[\d.,]+(?:\.\d{1,2})?(?:\s*(?:k|m|b|thousand|million|billion))?|(?:USD|EUR|GBP|JPY|CNY|INR|AUD|CAD)\s*[\d.,]+(?:\s*(?:k|m|bn))?|[\d.,]+(?:\.\d{1,2})?\s+(?:dollars?|euros?|yen|yuan|rupees?|pounds\s+sterling|british\s+pounds)'
      description: "Money amounts requiring explicit currency symbols or currency words"
      priority: high
      
    date:
      pattern: '(?i)\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec|January|February|March|April|June|July|August|September|October|November|December)\s+\d{1,2}(?:st|nd|rd|th)?,?\s+\d{4}|\b(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Sept|Oct|Nov|Dec)\s+\d{4}|\bQ[1-4]\s+\d{4}|\bFY\s?\d{4}|\b\d{4}[/-]\d{1,2}[/-]\d{1,2}|\b\d{1,2}[/-]\d{1,2}[/-]\d{2,4}'
      description: "Comprehensive date formats including abbreviated months, quarters, fiscal years"
      priority: high
      
    email:
      pattern: '\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b'
      description: "Email addresses"
      priority: medium
      
    phone:
      pattern: '(?i)(?:\+?\d{1,3}[\s.-]?)?(?:\(?\d{2,4}\)?[\s.-]?)?\d{3,4}[\s.-]?\d{3,4}(?:\s*(?:x|ext\.?|extension)\s*\d{1,6})?'
      description: "Phone numbers with international formats and extensions"
      priority: medium
      
    percent:
      pattern: '(?i)\b\d{1,3}(?:\.\d{1,2})?%'
      description: "Percentage values"
      priority: medium
      
    time:
      pattern: '(?i)\b(?:[01]?\d|2[0-3]):[0-5]\d(?::[0-5]\d)?(?:\s*(?:UTC|Z|[AP]M|[AP]M [A-Z]{2,4}|[A-Z]{2,4}))?\b|\b\d{1,2}\s*(?:AM|PM)\b|\b(?:[01]?\d|2[0-3])[:.][0-5]\d\s*(?:-|–|—|to)\s*(?:[01]?\d|2[0-3])[:.][0-5]\d(?:\s*(?:AM|PM))?'
      description: "Time expressions with 24h format, zones, and ranges"
      priority: low
      
    url:
      pattern: '(?i)(?:https?://|www\.)[^\s<>"{}|\\\\^`\\[\\]]+'
      description: "URLs and web links including bare www"
      priority: medium
      
    version:
      pattern: '\bv?\d+\.\d+(?:\.\d+)?(?:-[a-zA-Z0-9]+)?'
      description: "Version numbers"
      priority: low
      
    # Split measurement patterns by category for optimal FLPC performance
    measurement_length:
      pattern: '(?i)(?:^|[\s\-])\d+(?:\.\d+)?\s*(?:feet|ft|inches?|inch|cm|mm|meters?|metres?|kilometers?|kilometres?|km|miles?|mi|yd|yards?)'
      description: "Length and distance measurements"
      priority: medium
      
    measurement_weight:
      pattern: '(?i)(?:^|[\s\-])-?\d+(?:\.\d+)?\s*(?:kg|pounds?|lbs?|oz|g|mg|tons?|tonnes?)'
      description: "Weight and mass measurements"
      priority: medium
      
    measurement_time:
      pattern: '(?i)(?:^|[\s\-])-?\d+(?:\.\d+)?\s*(?:minutes?|mins?|seconds?|secs?|hours?|hrs?|days?|weeks?|months?|years?)'
      description: "Time duration measurements"
      priority: medium
      
    measurement_temperature:
      pattern: '(?i)(?:^|[\s\-])-?\d+(?:\.\d+)?\s*(?:degrees?|degC|degF|°C|°F)'
      description: "Temperature measurements"
      priority: medium
      
    measurement_sound:
      pattern: '(?i)(?:^|[\s\-])-?\d+(?:\.\d+)?\s*(?:decibels?|dB)'
      description: "Sound level measurements"
      priority: medium
      
    range_indicator:
      pattern: '(?i)\b(?:to|through|between|and)\b|[-–—]'
      description: "Range indicators for proximity-based range detection"
      priority: low
      
      
    regulation:
      pattern: '(?i)\b\d{1,2}\s*CFR\s*\d{3,4}(?:\.\d+)?(?:\([a-z0-9]+\))*(?:\s*Part\s*\d+)?|\b(?:ISO|IEC)\s*\d{4,5}(?::\d{4})?(?:/[A-Z]\d+)?|\bANSI\s*[A-Z]\d+(?:\.\d+)?(?::\d{4})?|\bNFPA\s*\d+[A-Z]?|\bOSHA\s*\d{4}-[A-Z0-9-]+|\bDOT\s*\d+\s*CFR\s*\d+|\bFDA\s*\d+\s*CFR\s*\d+'
      description: "Comprehensive regulation patterns including ISO, NFPA, ANSI, OSHA, and CFR Part forms"
      priority: high

# Pattern Performance Configuration
# ================================

pattern_performance:
  # Engine assignment strategy
  assignment_strategy:
    # Route based on pattern complexity
    simple_keywords: "aho_corasick"      # Simple string matching
    complex_regex: "flpc_rust"           # Complex regex patterns
    fallback: "python_re"                # Compatibility fallback
    
  # Performance optimization
  optimization:
    # Pre-compilation
    precompile_all: true                 # Compile all patterns at startup
    compile_timeout_seconds: 30          # Max compilation time
    
    # Caching
    enable_pattern_cache: true
    cache_size_patterns: 1000            # Cache 1000 compiled patterns
    cache_ttl_minutes: 60                # 1 hour cache TTL
    
    # Parallel processing
    parallel_pattern_execution: true
    max_parallel_patterns: 8             # Process 8 patterns simultaneously
    
  # Pattern routing rules
  routing_rules:
    # Content-based routing
    content_analysis:
      keyword_density_threshold: 0.8     # 80% keywords -> AC
      regex_complexity_threshold: 0.3    # 30% complex -> FLPC
      
    # Performance-based routing  
    performance_routing:
      prefer_fastest: true                # Always prefer fastest engine
      fallback_on_timeout: true          # Fallback if pattern times out
      timeout_ms: 100                     # 100ms pattern timeout
      
    # Quality-based routing
    quality_routing:
      maintain_accuracy: true             # Don't sacrifice accuracy for speed
      accuracy_threshold: 0.98            # 98% minimum accuracy

# Pattern Set Selection
# ====================

pattern_sets:
  # Default pattern set (balanced performance/coverage)
  default:
    aho_corasick: 
      - safety_keywords
      - organizations
      - workplace_safety
    flpc_regex:
      - money
      - date
      - email
      - regulation
      
  # Minimal pattern set (maximum speed)
  minimal:
    aho_corasick:
      - safety_keywords
      - organizations
    flpc_regex:
      - money
      - date
      
  # Complete pattern set (maximum coverage)
  complete:
    aho_corasick:
      - safety_keywords
      - organizations  
      - workplace_safety
      - environmental
      - medical
    flpc_regex:
      - money
      - date
      - email
      - phone
      - percent
      - time
      - url
      - version
      - measurement_length
      - measurement_weight
      - measurement_time
      - measurement_temperature
      - measurement_sound
      - range_indicator
      - regulation
      
  # Domain-specific pattern sets
  osha_focused:
    aho_corasick:
      - safety_keywords
      - workplace_safety
    flpc_regex:
      - regulation
      - measurement
      
  environmental_focused:
    aho_corasick:
      - environmental
      - organizations
    flpc_regex:
      - measurement
      - regulation